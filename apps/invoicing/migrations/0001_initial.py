# Generated by Django 5.2.10 on 2026-02-08 02:50

import django.core.validators
import django.db.models.deletion
import uuid
from decimal import Decimal
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('accounts', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='InvoiceItem',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('service_code', models.CharField(default='SVC-001', max_length=100, verbose_name='Code service')),
                ('product_reference', models.CharField(blank=True, default='', help_text='Référence manuelle si produit non lié', max_length=100, verbose_name='Référence produit')),
                ('description', models.CharField(max_length=500, verbose_name='Description')),
                ('detailed_description', models.TextField(blank=True, default='', verbose_name='Description détaillée')),
                ('quantity', models.PositiveIntegerField(validators=[django.core.validators.MinValueValidator(1)], verbose_name='Quantité')),
                ('unit_price', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(0)], verbose_name='Prix unitaire')),
                ('total_price', models.DecimalField(decimal_places=2, max_digits=14, verbose_name='Prix total')),
                ('unit_of_measure', models.CharField(default='unité', max_length=20, verbose_name='Unité de mesure')),
                ('discount_percent', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Remise (%)')),
                ('tax_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Taux de taxe (%)')),
                ('notes', models.TextField(blank=True, default='', verbose_name='Notes')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Article de facture',
                'verbose_name_plural': 'Articles de facture',
            },
        ),
        migrations.CreateModel(
            name='Payment',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=14, validators=[django.core.validators.MinValueValidator(0)], verbose_name='Montant')),
                ('payment_date', models.DateField(verbose_name='Date de paiement')),
                ('payment_method', models.CharField(choices=[('cash', 'Comptant'), ('check', 'Chèque'), ('credit_card', 'Carte de crédit'), ('bank_transfer', 'Virement bancaire'), ('paypal', 'PayPal'), ('other', 'Autre')], default='bank_transfer', max_length=50, verbose_name='Mode de paiement')),
                ('bank_name', models.CharField(blank=True, default='', max_length=200, verbose_name='Nom de la banque')),
                ('check_number', models.CharField(blank=True, default='', max_length=100, verbose_name='Numéro de chèque')),
                ('reference_number', models.CharField(blank=True, max_length=100, verbose_name='Numéro de référence')),
                ('transaction_id', models.CharField(blank=True, default='', max_length=255, verbose_name='ID de transaction')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('status', models.CharField(choices=[('pending', 'En attente'), ('success', 'Réussi'), ('failed', 'Échoué'), ('refunded', 'Remboursé')], default='success', max_length=20, verbose_name='Statut')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Paiement',
                'verbose_name_plural': 'Paiements',
                'ordering': ['-payment_date', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='PrintConfiguration',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(default='Configuration par défaut', max_length=200, verbose_name='Nom de la configuration')),
                ('paper_size', models.CharField(choices=[('A4', 'A4 (210 × 297 mm)'), ('LETTER', 'Letter (8.5 × 11 in)'), ('LEGAL', 'Legal (8.5 × 14 in)')], default='A4', max_length=10, verbose_name='Taille du papier')),
                ('orientation', models.CharField(choices=[('portrait', 'Portrait'), ('landscape', 'Paysage')], default='portrait', max_length=10, verbose_name='Orientation')),
                ('margin_top', models.PositiveIntegerField(default=20, verbose_name='Marge haute (mm)')),
                ('margin_bottom', models.PositiveIntegerField(default=20, verbose_name='Marge basse (mm)')),
                ('margin_left', models.PositiveIntegerField(default=20, verbose_name='Marge gauche (mm)')),
                ('margin_right', models.PositiveIntegerField(default=20, verbose_name='Marge droite (mm)')),
                ('font_family', models.CharField(choices=[('Arial', 'Arial'), ('Helvetica', 'Helvetica'), ('Times New Roman', 'Times New Roman'), ('Roboto', 'Roboto'), ('Open Sans', 'Open Sans')], default='Arial', max_length=50, verbose_name='Police')),
                ('font_size_normal', models.PositiveIntegerField(default=10, verbose_name='Taille police normale')),
                ('font_size_small', models.PositiveIntegerField(default=8, verbose_name='Taille police petite')),
                ('font_size_large', models.PositiveIntegerField(default=14, verbose_name='Taille police grande')),
                ('invoice_number_prefix', models.CharField(default='FAC-', max_length=10, verbose_name='Préfixe facture')),
                ('po_number_prefix', models.CharField(default='BC-', max_length=10, verbose_name='Préfixe bon de commande')),
                ('include_duplicate_watermark', models.BooleanField(default=False, verbose_name='Filigrane duplicata')),
                ('include_page_numbers', models.BooleanField(default=True, verbose_name='Numéros de page')),
                ('include_total_pages', models.BooleanField(default=True, verbose_name='Total des pages')),
                ('is_default', models.BooleanField(default=False, verbose_name='Configuration par défaut')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': "Configuration d'impression",
                'verbose_name_plural': "Configurations d'impression",
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='PrintHistory',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('document_type', models.CharField(choices=[('invoice', 'Facture'), ('purchase_order', 'Bon de commande')], max_length=20, verbose_name='Type de document')),
                ('document_id', models.UUIDField(verbose_name='ID du document')),
                ('document_number', models.CharField(max_length=100, verbose_name='Numéro du document')),
                ('printed_at', models.DateTimeField(auto_now_add=True, verbose_name="Date d'impression")),
                ('print_format', models.CharField(default='PDF', max_length=20, verbose_name="Format d'impression")),
                ('file_size', models.PositiveIntegerField(blank=True, null=True, verbose_name='Taille du fichier (bytes)')),
            ],
            options={
                'verbose_name': "Historique d'impression",
                'verbose_name_plural': "Historiques d'impression",
                'ordering': ['-printed_at'],
            },
        ),
        migrations.CreateModel(
            name='PrintTemplate',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=200, verbose_name='Nom du template')),
                ('template_type', models.CharField(choices=[('invoice', 'Facture'), ('purchase_order', 'Bon de commande')], max_length=20, verbose_name='Type')),
                ('is_default', models.BooleanField(default=False, verbose_name='Template par défaut')),
                ('header_logo', models.ImageField(blank=True, null=True, upload_to='print_templates/logos/', verbose_name='Logo')),
                ('header_company_name', models.CharField(default='ProcureGenius', max_length=200, verbose_name="Nom de l'entreprise")),
                ('header_address', models.TextField(blank=True, default='', verbose_name='Adresse')),
                ('header_phone', models.CharField(blank=True, default='', max_length=50, verbose_name='Téléphone')),
                ('header_email', models.EmailField(blank=True, default='', max_length=254, verbose_name='Email')),
                ('header_website', models.URLField(blank=True, default='', verbose_name='Site web')),
                ('footer_text', models.TextField(blank=True, default='', verbose_name='Texte du pied de page')),
                ('footer_conditions', models.TextField(blank=True, default='', verbose_name='Conditions générales')),
                ('primary_color', models.CharField(default='#0066cc', max_length=7, verbose_name='Couleur principale')),
                ('secondary_color', models.CharField(default='#00d4ff', max_length=7, verbose_name='Couleur secondaire')),
                ('text_color', models.CharField(default='#333333', max_length=7, verbose_name='Couleur du texte')),
                ('show_qr_code', models.BooleanField(default=True, verbose_name='Afficher le QR code')),
                ('qr_code_position', models.CharField(choices=[('top-right', 'En haut à droite'), ('bottom-right', 'En bas à droite'), ('bottom-left', 'En bas à gauche')], default='bottom-right', max_length=20, verbose_name='Position du QR code')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': "Template d'impression",
                'verbose_name_plural': "Templates d'impression",
                'ordering': ['template_type', 'name'],
            },
        ),
        migrations.CreateModel(
            name='Product',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=200, verbose_name='Nom')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('reference', models.CharField(blank=True, max_length=50, unique=True, verbose_name='Référence')),
                ('barcode', models.CharField(blank=True, max_length=50, null=True, unique=True, verbose_name='Code-barres')),
                ('product_type', models.CharField(choices=[('physical', 'Produit physique'), ('service', 'Service'), ('digital', 'Produit numérique')], default='physical', max_length=20, verbose_name='Type')),
                ('source_type', models.CharField(choices=[('purchased', 'Acheté (fournisseur)'), ('manufactured', 'Fabriqué (maison)'), ('resale', 'Revente')], default='purchased', max_length=20, verbose_name='Source')),
                ('price', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Prix de vente')),
                ('cost_price', models.DecimalField(decimal_places=2, default=0, max_digits=10, verbose_name="Prix d'achat")),
                ('price_editable', models.BooleanField(default=False, help_text='Si activé, le prix peut être modifié lors de la création de facture', verbose_name='Prix modifiable')),
                ('stock_quantity', models.IntegerField(default=0, verbose_name='Quantité en stock')),
                ('low_stock_threshold', models.IntegerField(default=10, verbose_name='Seuil de stock bas')),
                ('base_unit', models.CharField(choices=[('piece', 'Pièce'), ('tablet', 'Comprimé'), ('capsule', 'Gélule'), ('blister', 'Plaquette'), ('box', 'Boîte'), ('bottle', 'Flacon'), ('vial', 'Ampoule'), ('sachet', 'Sachet'), ('tube', 'Tube'), ('ml', 'Millilitre'), ('l', 'Litre'), ('g', 'Gramme'), ('kg', 'Kilogramme')], default='piece', help_text='Unité stockée en base de données (la plus petite unité)', max_length=20, verbose_name='Unité de base')),
                ('sell_unit', models.CharField(choices=[('piece', 'Pièce'), ('tablet', 'Comprimé'), ('capsule', 'Gélule'), ('blister', 'Plaquette'), ('box', 'Boîte'), ('bottle', 'Flacon'), ('vial', 'Ampoule'), ('sachet', 'Sachet'), ('tube', 'Tube'), ('ml', 'Millilitre'), ('l', 'Litre'), ('g', 'Gramme'), ('kg', 'Kilogramme')], default='piece', help_text='Unité affichée au client lors de la vente', max_length=20, verbose_name='Unité de vente')),
                ('conversion_factor', models.DecimalField(decimal_places=4, default=1, help_text='1 unité de vente = X unités de base. Ex: 1 boîte = 10 plaquettes', max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.0001'))], verbose_name='Facteur de conversion')),
                ('expiration_date', models.DateField(blank=True, help_text="Date d'expiration du produit", null=True, verbose_name='Date de péremption')),
                ('metadata', models.JSONField(blank=True, default=dict, null=True, verbose_name='Métadonnées')),
                ('is_active', models.BooleanField(default=True, verbose_name='Actif')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Produit',
                'verbose_name_plural': 'Produits',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='ProductCategory',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100, verbose_name='Nom')),
                ('slug', models.SlugField(max_length=100, verbose_name='Slug')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('is_active', models.BooleanField(default=True, verbose_name='Actif')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Catégorie de produit',
                'verbose_name_plural': 'Catégories de produits',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='StockMovement',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('movement_type', models.CharField(choices=[('reception', 'Réception (Bon de commande)'), ('sale', 'Vente (Facture)'), ('adjustment', 'Ajustement manuel'), ('return', 'Retour'), ('loss', 'Perte/Casse/Vol'), ('initial', 'Stock initial')], max_length=20, verbose_name='Type de mouvement')),
                ('quantity', models.IntegerField(verbose_name='Quantité')),
                ('quantity_before', models.IntegerField(verbose_name='Quantité avant')),
                ('quantity_after', models.IntegerField(verbose_name='Quantité après')),
                ('reference_type', models.CharField(blank=True, choices=[('purchase_order', 'Bon de commande'), ('invoice', 'Facture'), ('manual', 'Manuel'), ('loss_report', 'Rapport de perte')], max_length=20, null=True, verbose_name='Type de référence')),
                ('reference_id', models.UUIDField(blank=True, null=True, verbose_name='ID de référence')),
                ('reference_number', models.CharField(blank=True, max_length=100, verbose_name='Numéro de référence')),
                ('loss_reason', models.CharField(blank=True, choices=[('damaged', 'Produit endommagé'), ('expired', 'Produit périmé'), ('stolen', 'Vol'), ('lost', 'Perte/Égarement'), ('quality_issue', 'Problème de qualité'), ('other', 'Autre raison')], max_length=20, null=True, verbose_name='Raison de la perte')),
                ('loss_description', models.TextField(blank=True, verbose_name='Description détaillée de la perte')),
                ('loss_value', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Valeur de la perte')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Date')),
            ],
            options={
                'verbose_name': 'Mouvement de stock',
                'verbose_name_plural': 'Mouvements de stock',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Warehouse',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=200, verbose_name='Nom')),
                ('code', models.CharField(max_length=50, unique=True, verbose_name='Code')),
                ('address', models.TextField(blank=True, verbose_name='Adresse')),
                ('city', models.CharField(blank=True, max_length=100, verbose_name='Ville')),
                ('province', models.CharField(blank=True, max_length=100, verbose_name='Province')),
                ('postal_code', models.CharField(blank=True, max_length=20, verbose_name='Code postal')),
                ('country', models.CharField(default='Canada', max_length=100, verbose_name='Pays')),
                ('is_active', models.BooleanField(default=True, verbose_name='Actif')),
                ('is_default', models.BooleanField(default=False, verbose_name='Entrepôt par défaut')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Entrepôt',
                'verbose_name_plural': 'Entrepôts',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='Invoice',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('invoice_number', models.CharField(max_length=50, unique=True, verbose_name='Numéro de facture')),
                ('status', models.CharField(choices=[('draft', 'Brouillon'), ('sent', 'Envoyée'), ('paid', 'Payée'), ('overdue', 'En retard'), ('cancelled', 'Annulée')], default='draft', max_length=20, verbose_name='Statut')),
                ('invoice_type', models.CharField(choices=[('standard', 'Standard'), ('healthcare_consultation', 'Consultation médicale'), ('healthcare_laboratory', 'Laboratoire'), ('healthcare_pharmacy', 'Pharmacie'), ('credit_note', 'Avoir - Note de crédit')], default='standard', max_length=30, verbose_name='Type de facture')),
                ('title', models.CharField(blank=True, default='/', max_length=200, verbose_name='Titre')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Date de création')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Date de modification')),
                ('due_date', models.DateField(blank=True, null=True, verbose_name="Date d'échéance")),
                ('subtotal', models.DecimalField(decimal_places=2, max_digits=14, verbose_name='Sous-total')),
                ('tax_amount', models.DecimalField(decimal_places=2, default=0, max_digits=14, verbose_name='Montant des taxes')),
                ('total_amount', models.DecimalField(decimal_places=2, max_digits=14, verbose_name='Montant total')),
                ('billing_address', models.TextField(blank=True, verbose_name='Adresse de facturation')),
                ('payment_terms', models.CharField(default='Net 30', max_length=100, verbose_name='Conditions de paiement')),
                ('payment_method', models.CharField(blank=True, choices=[('mobile_money', 'Mobile Money'), ('cash', 'Espèces'), ('', 'Non spécifié')], help_text='Mode de paiement: Mobile Money ou Comptant', max_length=50, verbose_name='Mode de paiement')),
                ('currency', models.CharField(default='CAD', max_length=3, verbose_name='Devise')),
                ('cancellation_reason', models.TextField(blank=True, help_text="Raison de l'annulation de la facture", verbose_name="Raison d'annulation")),
                ('cancelled_at', models.DateTimeField(blank=True, null=True, verbose_name="Date d'annulation")),
                ('cancelled_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='cancelled_invoices', to=settings.AUTH_USER_MODEL, verbose_name='Annulé par')),
                ('client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='invoices', to='accounts.client', verbose_name='Client')),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='created_invoices', to=settings.AUTH_USER_MODEL, verbose_name='Créé par')),
                ('organization', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='invoices_by_org', to='accounts.organization', verbose_name='Organisation')),
                ('original_invoice', models.ForeignKey(blank=True, help_text='Facture annulée par cette note de crédit', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='credit_notes', to='invoicing.invoice', verbose_name='Facture originale')),
            ],
            options={
                'verbose_name': 'Facture',
                'verbose_name_plural': 'Factures',
                'ordering': ['-created_at'],
            },
        ),
    ]
